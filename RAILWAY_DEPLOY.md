# ðŸš€ Railway Deployment Guide for Stel Docs AI

## Why Railway is Perfect for Your AI Chatbot
- âœ… **8GB Memory** - Handles ChromaDB + ML dependencies easily
- âœ… **$5 Monthly Credit** - Perfect for POC demonstrations
- âœ… **Persistent Storage** - SQLite & ChromaDB files persist automatically
- âœ… **Auto Deploy** - Connect GitHub for automatic deployments
- âœ… **Professional URLs** - Share with clients easily
- âœ… **AI/ML Optimized** - Built for heavy Python applications

## ðŸ“‹ Step-by-Step Deployment

### **Step 1: Prepare Your Code**
Make sure you've run the setup script:
```bash
python deploy_setup.py
```

### **Step 2: Push to GitHub**
Your code should already be on GitHub. If not:
```bash
git add .
git commit -m "Railway deployment ready - Stel Docs AI POC"
git push origin main
```

### **Step 3: Deploy on Railway**
1. Go to [railway.app](https://railway.app)
2. **Sign up with your GitHub account**
3. Click **New Project**
4. Select **Deploy from GitHub repo**
5. Choose your `stelor-chatbot-poc` repository
6. Click **Deploy Now**

### **Step 4: Railway Auto-Configuration**
Railway will automatically:
- âœ… Detect it's a **Django app**
- âœ… Install all **requirements.txt** dependencies
- âœ… Run **migrations and static file collection**
- âœ… Start your app with **gunicorn**

### **Step 5: Set Environment Variables**
In Railway dashboard, go to **Variables** tab and add:

| Variable | Value | Description |
|----------|-------|-------------|
| `DEBUG` | `False` | Production mode |
| `SECRET_KEY` | `auto-generated` | Django security key |
| `GOOGLE_API_KEY` | `your-actual-api-key` | Your Google Gemini API key |
| `PYTHONUNBUFFERED` | `1` | Better logging |
| `RAILWAY_ENVIRONMENT` | `production` | Railway environment |

### **Step 6: Configure Persistent Storage**
1. In Railway dashboard, go to **Storage** tab
2. Click **Add Volume**
3. Mount Path: `/app/data`
4. Size: **1GB** (more than enough for POC)

**Update Django settings to use persistent storage:**
Railway automatically handles file persistence - no extra configuration needed!

### **Step 7: Custom Domain (Optional)**
1. Go to **Settings** â†’ **Domains**
2. Add custom domain: `stel-docs-ai.railway.app`
3. Railway provides HTTPS automatically

## ðŸŽ¯ What Persists Automatically

### **âœ… Database (SQLite)**
- Your `db.sqlite3` file persists automatically
- All chat sessions, messages, and user data saved permanently
- Survives deployments and restarts

### **âœ… ChromaDB Embeddings**
- Your `chroma_db/` folder persists automatically  
- All document embeddings saved permanently
- No vector database setup required

### **âœ… Uploaded Files**
- All uploaded documents persist in `media/` folder
- Files remain available between deployments

## ðŸ“± Share with Your Client

**Your POC URL:** `https://stelor-chatbot-poc-production.up.railway.app`

Send this URL to your client - it's live and ready to demo!

## ðŸ’° Railway Pricing for POC

**Starter Plan (Perfect for POC):**
- **$5 monthly credit** included
- **8GB RAM** - handles all ML dependencies
- **Persistent storage** included
- **Custom domains** included
- **Unlimited deployments**

**Usage for POC:** ~$2-3/month (well within free credit)

## ðŸ”„ Automatic Updates

Every time you push to GitHub:
1. Railway automatically redeploys
2. Your data persists (database, ChromaDB, files)
3. Zero downtime deployment
4. Automatic health checks

## ðŸ”§ Troubleshooting

### **Check Deployment Logs**
- In Railway dashboard â†’ **Deployments** â†’ **View Logs**
- Look for Django startup messages and any errors

### **Environment Variables**
- Verify `GOOGLE_API_KEY` is set correctly in Variables tab
- `SECRET_KEY` should be auto-generated by Railway
- Check `DEBUG=False` for production

### **Memory Usage**
- Railway shows real-time memory usage
- Your app should use ~300-500MB (well within 8GB limit)

### **Database Issues**
- Check if migrations ran successfully in deployment logs
- SQLite file persists automatically in Railway

### **File Persistence**
- Files persist automatically - no volume configuration needed
- Check deployment logs for any file permission issues

## ðŸš€ Advanced Configuration

### **Custom Build Command**
If needed, you can customize in `railway.json`:
```json
{
  "build": {
    "builder": "NIXPACKS"
  },
  "deploy": {
    "startCommand": "python manage.py migrate && python manage.py collectstatic --noinput && gunicorn core.wsgi:application --bind 0.0.0.0:$PORT"
  }
}
```

### **Health Checks**
Railway automatically monitors your app health and restarts if needed.

### **Scaling**
Once your client approves, you can easily scale:
- **More RAM** for larger documents
- **More CPU** for faster responses
- **Database upgrade** for production use

## ðŸŽ‰ Success! Your POC is Live

âœ… **Professional URL** to share with client  
âœ… **8GB RAM** - handles all AI/ML dependencies  
âœ… **Persistent data** - nothing gets lost  
âœ… **Automatic deployments** from GitHub  
âœ… **Production-ready** Django setup  
âœ… **$5 monthly credit** covers POC costs

Your **Stel Docs AI** is now ready for client demonstrations!

## ðŸ“ž Next Steps After Client Approval

1. **Custom domain** setup
2. **Production database** (PostgreSQL)
3. **Monitoring** and analytics
4. **User authentication** system
5. **API rate limiting**
6. **Backup strategies**

Railway makes all of these easy to implement when you're ready to scale! 